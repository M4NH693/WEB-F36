name: Check PHP and HTML

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  quality-check:
    runs-on: ubuntu-latest

    steps:
    # --- PH·∫¶N 1: L·∫§Y CODE V·ªÄ ---
    - name: üöö Get latest code
      uses: actions/checkout@v4

    # --- PH·∫¶N 2: KI·ªÇM TRA PHP (C≈©) ---
    - name: ‚ö° Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.2'

    - name: üî¨ PHP Syntax Check
      run: find . -name "*.php" -print0 | xargs -0 -n1 php -l

    # --- PH·∫¶N 3: KI·ªÇM TRA HTML (M·ªõi th√™m) ---
    - name: ‚ö° Setup Node.js (C·∫ßn ƒë·ªÉ ch·∫°y c√¥ng c·ª• check HTML)
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: üîç Install & Run HTMLHint
      run: |
        # C√†i ƒë·∫∑t c√¥ng c·ª• HTMLHint
        npm install -g htmlhint
        
        # Qu√©t l·ªói HTML trong t·∫•t c·∫£ file .php v√† .html
        # N√≥ s·∫Ω b√°o l·ªói n·∫øu thi·∫øu th·∫ª ƒë√≥ng (tag-pair)
        htmlhint "**/*.php" "**/*.html"